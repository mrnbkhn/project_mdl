/**
 * Provides utility methods to load VPL scripts.
 * @copyright  Astor Bizard, 2019
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("qtype_vplquestion/scriptsloader",["jquery","core/url","core/log"],(function($,url,log){function Loader(scripts,alreadyDefined){this.loading=!1,this.loaded=alreadyDefined,this.callbacks=[],this.scripts=scripts}var utilLoader=new Loader(["/mod/vpl/editor/jquery/jquery-1.9.1.js","/mod/vpl/editor/jquery/jquery-ui-1.10.4.js","/mod/vpl/editor/VPL_jquery_no_conflict.js","/mod/vpl/editor/VPLUtil.js"],"undefined"!=typeof VPL_Util),terminalLoader=new Loader(["/mod/vpl/editor/xterm/term.js","/mod/vpl/editor/VPLTerminal.js"],"undefined"!=typeof VPL_Terminal);function load(loader){return function(callback){loader.loaded?callback():(loader.callbacks.push(callback),loader.loading||(loader.loading=!0,function loadNextScript(iscript){iscript<loader.scripts.length?$.ajax({url:url.relativeUrl(loader.scripts[iscript]),dataType:"script",cache:!0}).then((function(){loadNextScript(iscript+1)})).catch(log.error):(loader.loaded=!0,loader.callbacks.forEach((function(cb){cb()})))}(0)))}}function loadVPLUtil(vplVersion,callback){if("undefined"!=typeof VPLUtil)callback();else{var vpl34=vplVersion>=2021011014;vplVersion>=2023072512?require(["mod_vpl/vplutil","mod_vpl/vplui"],(function(VPLUtil,VPLUI){window.VPLUtil=VPLUtil,window.VPLUI=VPLUI,callback()})):vpl34?require(["mod_vpl/vplutil"],(function(VPLUtil){window.VPLUtil=VPLUtil,window.VPLUI=VPLUtil,callback()})):load(utilLoader)((function(){window.VPLUtil=VPL_Util,window.VPLUI=VPL_Util,callback()}))}}return{loadVPLUtil:loadVPLUtil,loadVPLTerminal:function(vplVersion,callback){"undefined"!=typeof VPLTerminal?callback():loadVPLUtil(vplVersion,vplVersion>=2021011014?function(){require(["mod_vpl/vplterminal"],(function(VPLTerminal){window.VPLTerminal=VPLTerminal,$.ajax({url:url.relativeUrl("/mod/vpl/editor/xterm/term.js"),dataType:"script",cache:!0}).done(callback)}))}:function(){load(terminalLoader)((function(){window.VPLTerminal=VPL_Terminal,callback()}))})}}}));

//# sourceMappingURL=scriptsloader.min.js.map